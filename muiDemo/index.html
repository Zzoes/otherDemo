<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>如此生活|首页</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=0">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="css/swiper-3.4.2.min.css">
		<link rel="stylesheet" type="text/css" href="css/mui.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/index.css"/>
	</head>
	<body>
		<div class="header">
			<div class="search-box">
				<a href="./search.html" class="search-icon">请输入搜索关键词</a>
				<a href="" class="login-btn"></a>
			</div>
		</div>
		
		<div  id="pullrefresh" class="mui-content mui-scroll-wrapper">
			<div class="mui-scroll">
					<div class="swiper-container">
						<div class="swiper-wrapper">
							<div class="swiper-slide">
								<img src="http://temp.im/320x185/#f8f8f8" alt="">
							</div>
							<div class="swiper-slide">
								<img src="http://temp.im/320x185/#f8f8f8" alt="">
							</div>
							<div class="swiper-slide">
								<img src="http://temp.im/320x185/#f8f8f8" alt="">
							</div>
						</div>
						<div class="swiper-pagination"></div>
					</div>

					<ul class="mid-nav">
						<li>
							<span class="nav-icon dv"></span>
							<p class="nav-name">大V会员</p>
						</li>
						<li>
							<span class="nav-icon sale"></span>
							<p class="nav-name">买卖帮客</p>
						</li>
						<li>
							<span class="nav-icon invite"></span>
							<p class="nav-name">邀请有礼</p>
						</li>
						<li>
							<span class="nav-icon more"></span>
							<p class="nav-name">更多商品</p>
						</li>
					</ul>

					<div class="ad-banner">
						<img src="http://temp.im/272x90/#f8f8f8" alt="">
					</div>

					<h2 class="box-tit">
						<span class="tit-icon">超值好物</span>
					</h2>

					<div class="img-box">
						<div class="img-item l">
							<img src="http://temp.im/170x141/#f8f8f8" alt="">
						</div>

						<div class="img-item m">
							<img src="http://temp.im/82x141/#f8f8f8" alt="">
						</div>

						<div class="img-item s mr-0">
							<img src="http://temp.im/82x82/#f8f8f8" alt="">
						</div>
					</div>

					<div class="scroll-box">
						<div class="slide-box">
							<div class="slide-item">
								<a href="#" class="more">
									<img src="images/more@2x.png" alt="">
									<p>查看更多</p>
								</a>
							</div>
							<div class="slide-item">
								<img src="http://temp.im/125x125/#f8f8f8" alt="">
								<p class="item-desc">JM 海洋珍珠深层保JM 海洋珍珠深层保JM 海洋珍珠深层保</p>
								<p class="item-price">￥<b>99.03</b><span class="icon-star">+ 10 </span></p>
							</div>
							<div class="slide-item">
								<img src="http://temp.im/125x125/#f8f8f8" alt="">
								<p class="item-desc">JM 海洋珍珠深层保JM 海洋珍珠深层保JM 海洋珍珠深层保</p>
								<p class="item-price">￥<b>99.03</b></p>
							</div>
							<div class="slide-item">
								<img src="http://temp.im/125x125/#f8f8f8" alt="">
								<p class="item-desc">JM 海洋珍珠深层保JM 海洋珍珠深层保JM 海洋珍珠深层保</p>
								<p class="item-price">￥<b>99.03</b></p>
							</div>
							<div class="slide-item">
								<img src="http://temp.im/125x125/#f8f8f8" alt="">
								<p class="item-desc">JM 海洋珍珠深层保JM 海洋珍珠深层保JM 海洋珍珠深层保</p>
								<p class="item-price">￥<b>99.03</b></p>
							</div>
							<div class="slide-item">
								<img src="http://temp.im/125x125/#f8f8f8" alt="">
								<p class="item-desc">JM 海洋珍珠深层保JM 海洋珍珠深层保JM 海洋珍珠深层保</p>
								<p class="item-price">￥<b>99.03</b></p>
							</div>
						</div>
					</div>

					<div class="scroll-box">
						<div class="slide-box">
							<div class="slide-item">
								<img src="http://temp.im/125x125/#f8f8f8" alt="">
								<p class="item-desc">JM 海洋珍珠深层保JM 海洋珍珠深层保JM 海洋珍珠深层保</p>
								<p class="item-price">￥<b>99.03</b></p>
							</div>
							<div class="slide-item">
								<img src="http://temp.im/125x125/#f8f8f8" alt="">
								<p class="item-desc">JM 海洋珍珠深层保JM 海洋珍珠深层保JM 海洋珍珠深层保</p>
								<p class="item-price">￥<b>99.03</b></p>
							</div>
							<div class="slide-item">
								<img src="http://temp.im/125x125/#f8f8f8" alt="">
								<p class="item-desc">JM 海洋珍珠深层保JM 海洋珍珠深层保JM 海洋珍珠深层保</p>
								<p class="item-price">￥<b>99.03</b></p>
							</div>
							<div class="slide-item">
								<img src="http://temp.im/125x125/#f8f8f8" alt="">
								<p class="item-desc">JM 海洋珍珠深层保JM 海洋珍珠深层保JM 海洋珍珠深层保</p>
								<p class="item-price">￥<b>99.03</b></p>
							</div>
						</div>
					</div>

					<div class="shop-box">
						<div class="shop-item">
							<img src="http://temp.im/170x170/#f8f8f8" alt="">
							<p class="item-desc">JM 海洋珍珠深层保JM 海洋珍珠深层保JM 海洋珍珠深层保</p>
							<p class="item-price">￥<b>99.03</b><span class="icon-star">+ 10 </span></p>
						</div>
						<div class="shop-item">
							<img src="http://temp.im/170x170/#f8f8f8" alt="">
							<p class="item-desc">JM 海洋珍珠深层保JM 海洋珍珠深层保JM 海洋珍珠深层保</p>
							<p class="item-price">￥<b>99.03</b><span class="discount-icon"></span></p>
						</div>
						<div class="shop-item">
							<img src="http://temp.im/170x170/#f8f8f8" alt="">
							<p class="item-desc">JM 海洋珍珠深层保JM 海洋珍珠深层保JM 海洋珍珠深层保</p>
							<p class="item-price">￥<b>99.03</b><span class="discount-icon"></span></p>
						</div>
						<div class="shop-item">
							<img src="http://temp.im/170x170/#f8f8f8" alt="">
							<p class="item-desc">JM 海洋珍珠深层保JM 海洋珍珠深层保JM 海洋珍珠深层保</p>
							<p class="item-price">￥<b>99.03</b><span class="icon-star">+ 10 </span></p>
						</div>
					</div>
			</div>
		</div>
		
		<!-- 回到顶部 -->
		<div class="go-top">
			<img src="images/up@2x.png">
		</div>


		<script src="js/jquery-1.8.3.min.js"></script>
		<script type="text/javascript" src="js/swiper-3.4.2.min.js"></script>
		<script src="js/mui.min.js"></script>

		<script>
			$(function(){
				
				// 上下拉
				mui('body').on('tap','a',function(){document.location.href=this.href;});
				mui.init({
					pullRefresh : {
						container:'#pullrefresh',//待刷新区域标识，querySelector能定位的css选择器均可，比如：id、.class等
						down : {
							auto: false,
							callback :pullfreshDown
						},				
						up : {
							auto:false,
							contentrefresh : "正在加载...",
							contentnomore:'没有更多数据了',
							callback :pullfreshUp 
						}
					}
				});


				function pullfreshDown(){//下拉刷新
					console.log('down');
					console.log('up');
					
					var data = {
					};
					downList();
					ajaxQuery('','post','json',data,downList);
				};

				function pullfreshUp(){//上拉加载
					console.log('up');
					
					var data = {
					};
					upList();
					ajaxQuery('','post','json',data,upList);
				};
				
				function downList(res){
					console.log('goolist');
					setTimeout(() => {
						mui("#pullrefresh").pullRefresh().endPulldownToRefresh(false);
					}, 1000);
					// if(res.msg.goods.length >0){
					// 	mui("#pullrefresh").pullRefresh().endPullupToRefresh(false);
					// }else{
					// 	mui("#pullrefresh").pullRefresh().endPullupToRefresh(true);
					// }
				};
				function upList(res){
					console.log('goolist');
					setTimeout(() => {
						mui("#pullrefresh").pullRefresh().endPullupToRefresh(false);
					}, 1000);
					
					// if(res.msg.goods.length >0){
					// 	mui("#pullrefresh").pullRefresh().endPullupToRefresh(false);
					// }else{
					// 	mui("#pullrefresh").pullRefresh().endPullupToRefresh(true);
					// }
				};
				
				//横向滚动
				$('.scroll-box').each(function(index,ele){
					var slideItem = $(ele).find('.slide-item');
					var slideBox = slideItem.closest('.slide-box');
					var slideItemLen = slideItem.length;
					slideBox.width(slideItemLen * slideItem.width() + 8*(slideItemLen - 1));
				});
				
				mui('.scroll-box').scroll({
					scrollY: false, //是否竖向滚动
					scrollX: true, //是否横向滚动
					deceleration:0.0006, //阻尼系数,系数越小滑动越灵敏
					bounce: true //是否启用回弹
				});
				
				//回到顶部
				mui('.go-top').on('tap','img',function(){
					mui('.mui-scroll-wrapper').scroll().scrollTo(0,0,1000);
				});

				//轮播图
				var mySwiper = new Swiper('.swiper-container', {
					autoplay: 5000,//可选选项，自动滑动
					pagination : '.swiper-pagination',
					width : window.innerWidth,
					loop : true,
					autoplayDisableOnInteraction : false
				});
			});

			//ajax请求列表
			function ajaxQuery(url,type,dataType,data,successFn){
				$.ajax({
					url: url,
					type: type,
					// contentType: "application/x-www-form-urlencoded",
					dataType: dataType,
					data: data,
					success: function (res) {
						successFn(res);
					}
				})
			}

			//获取地址栏参数
			function GetQueryString(name) {
				var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
				var r = window.location.search.substr(1).match(reg);
				if (r != null)return unescape(r[2]);
				return null;
			};
			
		</script>
	</body>
</html>